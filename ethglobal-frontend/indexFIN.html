<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LazosTech DAO | Board Governance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --lazos-gold: #f2a93b; }
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #000; color: #fff;
            min-height: 100vh; overflow-x: hidden; position: relative;
        }
        body::before {
            content: ""; position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle at center, rgba(242, 169, 59, 0.08) 0%, transparent 40%);
            animation: resonance 8s infinite ease-in-out; z-index: -1;
        }
        @keyframes resonance { 0%, 100% { transform: scale(1) opacity(0.5); } 50% { transform: scale(1.1) opacity(0.8); filter: blur(20px); } }
        .lazos-card { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 16px; }
        .btn-gold { background-color: var(--lazos-gold); color: #000; font-weight: 800; transition: all 0.3s ease; }
        .btn-gold:hover { color: #fff !important; transform: translateY(-2px); box-shadow: 0 8px 20px rgba(242, 169, 59, 0.3); }
        .btn-outline-gold { border: 1px solid var(--lazos-gold); color: var(--lazos-gold); background: transparent; font-weight: 700; transition: all 0.3s ease; }
        .step-hidden { display: none; opacity: 0; }
        .step-active { display: block; opacity: 1; transition: opacity 0.5s ease; }
        .custom-input { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 1rem; border-radius: 12px; width: 100%; outline: none; }
        .voted-approved { border: 1px solid rgba(242, 169, 59, 0.3); background: rgba(242, 169, 59, 0.1); color: var(--lazos-gold); }
        .voted-rejected { border: 1px solid rgba(239, 68, 68, 0.3); background: rgba(239, 68, 68, 0.1); color: #ef4444; }
    </style>
</head>
<body class="flex flex-col">

    <nav class="p-4 w-full max-w-7xl mx-auto flex justify-between items-center relative z-10">
        <div class="flex items-center gap-3">
            <img src="https://static.wixstatic.com/media/9d63c4_6c021161372b43a99201994640476442~mv2.png" alt="LazosTech" class="h-8">
            <div class="flex flex-col">
                <span class="text-lg font-extrabold tracking-tighter leading-none">LAZOSTECH</span>
                <span class="text-[8px] text-[#f2a93b] tracking-[0.3em] font-bold uppercase">Blockchain Solutions</span>
            </div>
        </div>
        <div class="text-[9px] font-mono text-gray-500 border border-white/10 px-3 py-1 rounded-full uppercase tracking-widest">Base Sepolia</div>
    </nav>

    <main class="flex-grow flex items-center justify-center p-4 relative z-10">
        
        <div id="step1" class="max-w-2xl w-full text-center space-y-8 step-active">
            <h2 class="text-5xl font-extrabold tracking-tight italic text-[#f2a93b]">LazosTech DAO</h2>
            <div class="flex flex-col gap-3 max-w-xs mx-auto">
                <button onclick="connect('admin')" class="btn-gold py-4 rounded-xl uppercase tracking-widest text-[10px]">Connect Moderator</button>
                <button onclick="connect('voter')" class="bg-white/5 border border-white/10 py-4 rounded-xl uppercase tracking-widest text-[10px] font-bold text-gray-300">Connect Participant</button>
            </div>
        </div>

        <div id="step4" class="max-w-4xl w-full step-hidden">
            <div class="flex justify-between items-end mb-6">
                <div>
                    <h2 class="text-3xl font-extrabold italic">Voting Room</h2>
                    <p class="text-[#f2a93b] text-[9px] font-bold tracking-widest uppercase">Quorum Required: 3/4</p>
                </div>
                <button onclick="showResults()" class="btn-outline-gold px-6 py-2 rounded-full text-[9px] uppercase tracking-widest">Finalize Session</button>
            </div>
            <div id="votingGrid" class="grid md:grid-cols-2 gap-4"></div>
        </div>

        <div id="step5" class="max-w-4xl w-full step-hidden">
            <div id="resultsContent"></div>
            <div class="mt-6 text-center">
                <button onclick="location.reload()" class="text-gray-500 hover:text-white uppercase text-[9px] tracking-widest font-bold underline underline-offset-4">New Board Session</button>
            </div>
        </div>

    </main>

    <script>
        let props = [];

        function transition(from, to) {
            document.getElementById(from).classList.replace('step-active', 'step-hidden');
            setTimeout(() => {
                document.getElementById(from).style.display = 'none';
                document.getElementById(to).style.display = 'block';
                setTimeout(() => document.getElementById(to).classList.add('step-active'), 50);
            }, 300);
        }

        function connect(role) {
            if (role === 'admin') { /* LÃ³gica admin similar */ } 
            else {
                props = [
                    {text: "Is construction viable in Zonamerica?", vote: null},
                    {text: "Is required land available?", vote: null},
                    {text: "Alignment with Zonamerica goals?", vote: null},
                    {text: "Final Approval for Construction", vote: null}
                ];
                renderVotingGrid();
                transition('step1', 'step4');
            }
        }

        function renderVotingGrid() {
            const grid = document.getElementById('votingGrid');
            grid.innerHTML = props.map((p, i) => `
                <div class="lazos-card p-5 border-white/5">
                    <h4 class="font-bold text-base mb-6 h-10 overflow-hidden leading-tight">${p.text}</h4>
                    <div id="vote-actions-${i}" class="flex gap-3">
                        <button onclick="vote(${i}, 'Approved')" class="flex-grow btn-gold py-3 rounded-lg text-[9px] uppercase">APPROVE</button>
                        <button onclick="vote(${i}, 'Rejected')" class="flex-grow bg-red-500/10 border border-red-500/20 py-3 rounded-lg text-[9px] font-bold text-red-400 uppercase transition-all">REJECT</button>
                    </div>
                    <div id="vote-done-${i}" class="hidden py-3 font-bold text-center rounded-lg text-[9px] uppercase tracking-widest"></div>
                </div>
            `).join('');
        }

        function vote(i, type) {
            props[i].vote = type;
            document.getElementById(`vote-actions-${i}`).classList.add('hidden');
            const done = document.getElementById(`vote-done-${i}`);
            done.classList.remove('hidden');
            done.innerText = `MY VOTE: ${type}`;
            done.className = type === 'Approved' ? "py-3 font-bold text-center rounded-lg text-[9px] uppercase tracking-widest voted-approved" : "py-3 font-bold text-center rounded-lg text-[9px] uppercase tracking-widest voted-rejected";
        }

        function showResults() {
            const content = document.getElementById('resultsContent');
            let html = `
                <div class="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
                    <h2 class="text-xl font-bold italic">Board Resolution Report</h2>
                    <p class="text-[9px] text-gray-500 font-mono tracking-tighter">REF: LAZ-2026-B1</p>
                </div>
                <div class="grid md:grid-cols-2 gap-4">
            `;

            html += props.map((p, i) => {
                const myVoteApproved = p.vote === 'Approved';
                // Simulamos 3 votos previos aprobados + el tuyo
                const yesCount = myVoteApproved ? 4 : 3;
                const noCount = myVoteApproved ? 0 : 1;
                const yesPercent = (yesCount / 4) * 100;
                const noPercent = (noCount / 4) * 100;
                
                const statusLabel = myVoteApproved ? 'Passed' : 'Rejected';
                const labelClass = myVoteApproved ? 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20' : 'bg-red-500/10 text-red-400 border-red-500/20';

                return `
                <div class="lazos-card p-4 border-white/5">
                    <div class="flex justify-between mb-3">
                        <span class="text-[8px] font-mono text-gray-500 uppercase">RES-0${i+1}</span>
                        <span class="text-[8px] font-bold px-2 py-0.5 rounded border ${labelClass} uppercase tracking-widest">${statusLabel}</span>
                    </div>
                    <h4 class="font-bold text-white text-sm mb-4 leading-tight h-8">${p.text}</h4>
                    
                    <div class="w-full bg-white/5 h-2 rounded-full mb-2 flex overflow-hidden">
                        <div class="bg-emerald-500 h-full transition-all duration-1000" style="width: ${yesPercent}%"></div>
                        <div class="bg-red-500 h-full transition-all duration-1000" style="width: ${noPercent}%"></div>
                    </div>

                    <div class="flex justify-between items-center text-[8px] font-bold uppercase tracking-widest">
                        <div class="flex gap-3">
                            <span class="text-emerald-400">Yes: ${yesPercent}%</span>
                            <span class="${noCount > 0 ? 'text-red-400' : 'text-gray-600'}">No: ${noPercent}%</span>
                        </div>
                        <span class="text-gray-500">Votes: ${yesCount}/4</span>
                    </div>
                </div>`;
            }).join('');

            html += `</div>`;
            content.innerHTML = html;
            transition('step4', 'step5');
        }
    </script>
</body>
</html>
